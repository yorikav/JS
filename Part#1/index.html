<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>JS Lesson#3</title>
    </head>
    <body>
       <h1>JS Урок 3</h1>
        <script>
            var 
                InputValue      // Введенное число
                ;
            // END VAR ***************************

            InputValue = parseInt(prompt('Введите число от 0 до 1000000'));
            console.log('Введенное число: '+InputValue);
            
            alert(SimpleNumber(InputValue));
            
            function SimpleNumber(CheckedValue)
            {
                var
                    Remain,         // Остаток от деления
                    i,              // Счетчик цикла
                    text            // Выводимый пользователю текст                
                    ;
                // END VAR ****************************************
                
                // Проверка ввода на принадлежность диапазону
                if (CheckedValue >= 0 && CheckedValue <= 1000000)
                {
                    console.log('Введенное число '+CheckedValue+' принадлежит проверяемому диапазону');

                    // В цикле DO -- WHILE производим деление до тех пор,
                    // пока не получим нулевой остаток от деления, 
                    // либо не переберем все числа от 2 до введенного минус 1
                    // если в диапазоне чисел от 2 до введенного минус 1 окажется число,
                    // которое нацело делит веденное число, значит веденное число 
                    // не является простым, во всех остальных случаях - является

                    i = 1;        
                    do
                    {
                        i++;
                        Remain = parseInt(CheckedValue % i);
                    }
                    while (Remain !== 0 && i<(CheckedValue-1));
                    console.log('Остаток от деления: '+Remain+', цикл: '+i);

                    if ((Remain !== 0) && (CheckedValue > 1))
                    {
                        text = 'Число ' + CheckedValue + ' является простым';
                    }
                    else
                    {
                        text = 'Число ' + CheckedValue + ' не является простым, поскольку делится на ' + i;
                    }
                    console.log(text);

                    text = text + ', ' + MaxSimpleNumber(1000000);
                }
                else
                {
                    text = 'Недопустимый ввод!';
                    console.log(text);
                }
                return text;

                function MaxSimpleNumber(CheckedValue)
                {
                    var
                        Remain,         // Остаток от деления
                        MaxVal,         // Максимальное число
                        i, j,           // Счетчик цикла
                        text            // Выводимый пользователю текст
                        ;
                    // END VAR ****************************************

                    i = parseInt(CheckedValue);
                    do
                    {
                        MaxVal = 0;
                        j = 1;
                        do
                        {
                            j++;
                            Remain = parseInt(i % j);
                            MaxVal = i;
                        }
                        while ((Remain !== 0) && (j < i));
                        // Во вложенном цикле производиться деление проверяемого числа
                        // на целые делители от 2 до максимально возможного,
                        // если при делении получаем нулевой остаток, это значит,
                        // что число делится на 1, на само себя, и еще какое то число,
                        // след-но, оно не является простым -> выходим из цикла

                        i--;
                    }
                    while ((i > j ) && (i > 1));
                    // Во внешнем цикле перебираем возможные значения,
                    // начиная с максимального, до тех пор, пока количество проверок
                    // внутреннего цикла не совпадет со значением проверяемого числа,
                    // это будет свидетельствовать о том, что количество делений с нулевым
                    // остатком равно 0 -> следовательно, проверяемое число делится только
                    // на 1 и на самого себя (определение простого числа)

                    console.log('Поиск МПЧ, остаток: '+Remain+', цикл: '+i);

                    if (MaxVal > 0)
                    {
                        text = 'маскимальное простое число: '+MaxVal;
                    }
                    else
                    {
                        text = 'маскимальное простое число не найдено';
                    }
                    console.log(text);

                    return text;
                }
            }
        </script>
    </body>
</html>